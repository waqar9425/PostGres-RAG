{
  "doc_name": "sql-revoke",
  "url": "https://www.postgresql.org/docs/16/sql-revoke.html",
  "sections": [
    {
      "title": "REVOKE",
      "text": "REVOKE — remove access privileges\n"
    },
    {
      "title": "Synopsis",
      "text": "\n\nCODE:\n\nREVOKE [ GRANT OPTION FOR ]\n    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }\n    [, ...] | ALL [ PRIVILEGES ] }\n    ON { [ TABLE ] table_name [, ...]\n         | ALL TABLES IN SCHEMA schema_name [, ...] }\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { SELECT | INSERT | UPDATE | REFERENCES } ( column_name [, ...] )\n    [, ...] | ALL [ PRIVILEGES ] ( column_name [, ...] ) }\n    ON [ TABLE ] table_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { USAGE | SELECT | UPDATE }\n    [, ...] | ALL [ PRIVILEGES ] }\n    ON { SEQUENCE sequence_name [, ...]\n         | ALL SEQUENCES IN SCHEMA schema_name [, ...] }\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }\n    ON DATABASE database_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { USAGE | ALL [ PRIVILEGES ] }\n    ON DOMAIN domain_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { USAGE | ALL [ PRIVILEGES ] }\n    ON FOREIGN DATA WRAPPER fdw_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { USAGE | ALL [ PRIVILEGES ] }\n    ON FOREIGN SERVER server_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { EXECUTE | ALL [ PRIVILEGES ] }\n    ON { { FUNCTION | PROCEDURE | ROUTINE } function_name [ ( [ [ argmode ] [ arg_name ] arg_type [, ...] ] ) ] [, ...]\n         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA schema_name [, ...] }\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { USAGE | ALL [ PRIVILEGES ] }\n    ON LANGUAGE lang_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }\n    ON LARGE OBJECT loid [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { SET | ALTER SYSTEM } [, ...] | ALL [ PRIVILEGES ] }\n    ON PARAMETER configuration_parameter [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }\n    ON SCHEMA schema_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { CREATE | ALL [ PRIVILEGES ] }\n    ON TABLESPACE tablespace_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ GRANT OPTION FOR ]\n    { USAGE | ALL [ PRIVILEGES ] }\n    ON TYPE type_name [, ...]\n    FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nREVOKE [ { ADMIN | INHERIT | SET } OPTION FOR ]\n    role_name [, ...] FROM role_specification [, ...]\n    [ GRANTED BY role_specification ]\n    [ CASCADE | RESTRICT ]\n\nwhere role_specification can be:\n\n    [ GROUP ] role_name\n  | PUBLIC\n  | CURRENT_ROLE\n  | CURRENT_USER\n  | SESSION_USER\n\n"
    },
    {
      "title": "Description",
      "text": "TheREVOKEcommand revokes previously granted privileges from one or more roles. The key wordPUBLICrefers to the implicitly defined group of all roles.\nSee the description of theGRANTcommand for the meaning of the privilege types.\nNote that any particular role will have the sum of privileges granted directly to it, privileges granted to any role it is presently a member of, and privileges granted toPUBLIC. Thus, for example, revokingSELECTprivilege fromPUBLICdoes not necessarily mean that all roles have lostSELECTprivilege on the object: those who have it granted directly or via another role will still have it. Similarly, revokingSELECTfrom a user might not prevent that user from usingSELECTifPUBLICor another membership role still hasSELECTrights.\nIfGRANT OPTION FORis specified, only the grant option for the privilege is revoked, not the privilege itself. Otherwise, both the privilege and the grant option are revoked.\nIf a user holds a privilege with grant option and has granted it to other users then the privileges held by those other users are called dependent privileges. If the privilege or the grant option held by the first user is being revoked and dependent privileges exist, those dependent privileges are also revoked ifCASCADEis specified; if it is not, the revoke action will fail. This recursive revocation only affects privileges that were granted through a chain of users that is traceable to the user that is the subject of thisREVOKEcommand. Thus, the affected users might effectively keep the privilege if it was also granted through other users.\nWhen revoking privileges on a table, the corresponding column privileges (if any) are automatically revoked on each column of the table, as well. On the other hand, if a role has been granted privileges on a table, then revoking the same privileges from individual columns will have no effect.\nWhen revoking membership in a role,GRANT OPTIONis instead calledADMIN OPTION, but the behavior is similar. Note that, in releases prior toPostgreSQL16, dependent privileges were not tracked for grants of role membership, and thusCASCADEhad no effect for role membership. This is no longer the case. Note also that this form of the command does not allow the noise wordGROUPinrole_specification.\nJust asADMIN OPTIONcan be removed from an existing role grant, it is also possible to revokeINHERIT OPTIONorSET OPTION. This is equivalent to setting the value of the corresponding option toFALSE.\n"
    },
    {
      "title": "Notes",
      "text": "A user can only revoke privileges that were granted directly by that user. If, for example, user A has granted a privilege with grant option to user B, and user B has in turn granted it to user C, then user A cannot revoke the privilege directly from C. Instead, user A could revoke the grant option from user B and use theCASCADEoption so that the privilege is in turn revoked from user C. For another example, if both A and B have granted the same privilege to C, A can revoke their own grant but not B's grant, so C will still effectively have the privilege.\nWhen a non-owner of an object attempts toREVOKEprivileges on the object, the command will fail outright if the user has no privileges whatsoever on the object. As long as some privilege is available, the command will proceed, but it will revoke only those privileges for which the user has grant options. TheREVOKE ALL PRIVILEGESforms will issue a warning message if no grant options are held, while the other forms will issue a warning if grant options for any of the privileges specifically named in the command are not held. (In principle these statements apply to the object owner as well, but since the owner is always treated as holding all grant options, the cases can never occur.)\nIf a superuser chooses to issue aGRANTorREVOKEcommand, the command is performed as though it were issued by the owner of the affected object. (Since roles do not have owners, in the case of aGRANTof role membership, the command is performed as though it were issued by the bootstrap superuser.) Since all privileges ultimately come from the object owner (possibly indirectly via chains of grant options), it is possible for a superuser to revoke all privileges, but this might require use ofCASCADEas stated above.\nREVOKEcan also be done by a role that is not the owner of the affected object, but is a member of the role that owns the object, or is a member of a role that holds privilegesWITH GRANT OPTIONon the object. In this case the command is performed as though it were issued by the containing role that actually owns the object or holds the privilegesWITH GRANT OPTION. For example, if tablet1is owned by roleg1, of which roleu1is a member, thenu1can revoke privileges ont1that are recorded as being granted byg1. This would include grants made byu1as well as by other members of roleg1.\nIf the role executingREVOKEholds privileges indirectly via more than one role membership path, it is unspecified which containing role will be used to perform the command. In such cases it is best practice to useSET ROLEto become the specific role you want to do theREVOKEas. Failure to do so might lead to revoking privileges other than the ones you intended, or not revoking anything at all.\nSeeSection 5.7for more information about specific privilege types, as well as how to inspect objects' privileges.\n"
    },
    {
      "title": "Examples",
      "text": "Revoke insert privilege for the public on tablefilms:\n\n\nCODE:\n\nREVOKE INSERT ON films FROM PUBLIC;\n\nRevoke all privileges from usermanuelon viewkinds:\n\n\nCODE:\n\nREVOKE ALL PRIVILEGES ON kinds FROM manuel;\n\nNote that this actually means“revoke all privileges that I granted”.\nRevoke membership in roleadminsfrom userjoe:\n\n\nCODE:\n\nREVOKE admins FROM joe;\n\n"
    },
    {
      "title": "Compatibility",
      "text": "The compatibility notes of theGRANTcommand apply analogously toREVOKE. The keywordRESTRICTorCASCADEis required according to the standard, butPostgreSQLassumesRESTRICTby default.\n"
    }
  ]
}